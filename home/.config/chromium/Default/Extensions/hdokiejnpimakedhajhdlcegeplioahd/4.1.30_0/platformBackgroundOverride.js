(function(c){c.initialize=function(){chrome.runtime.onConnect.addListener(function(a){if(0===a.name.indexOf("requestPort")){var b=c.initializeRequestFramework({sendContentScript:function(b){if(a.disconnected)return!1;a.postMessage(b);return!0},windowID:a.sender&&a.sender.tab?a.sender.tab.windowId:null,tabURL:a.sender&&a.sender.tab?a.sender.tab.url:null,tabID:a.sender&&a.sender.tab?a.sender.tab.id:null});a.onMessage.addListener(b.requestHandler);a.onDisconnect.addListener(function(){a.disconnected=
!0;b.disconnectHandler()})}})};c.getCurrentTab=function(a){chrome.tabs.query({active:!0,currentWindow:!0},function(b){1===b.length&&a({tabID:b[0].id,tabURL:b[0].url})})};c.openPopoverDialog=function(a){c.openTabDialog.apply(c,arguments)};c.refreshGroupNames=function(){};c.closePopovers=function(){chrome.extension.getViews({type:"popup"}).forEach(function(a){a.close()})};var d=function(a,b){LPTabs.get({tabID:a.id,callback:function(c){if(b.inject){var d=0,h=[].concat(b.inject.files),l=function(){++d===
h.length&&(c.extendTop({context:b.inject.context}),b.inject.allFrames&&c.extendFrames({context:b.inject.context}),b.loadHandler&&b.loadHandler(c))};h.forEach(function(c){chrome.tabs.executeScript(a.id,{file:c,allFrames:b.inject.allFrames},l)})}else b.loadHandler&&b.loadHandler(c);if(b.closeHandler){var e;a:{var j=c.tabDetails,f=chrome.extension.getViews({type:"tab",windowId:j.windowID});if(1===f.length)e=f[0];else{for(var g=0,m=f.length;g<m;++g){var k=f[g];if(k.tabID===j.tabID){e=k;break a}}e=null}}e&&
e.addEventListener("beforeunload",function(){b.closeHandler(e)})}}})};c.openDialogWindow=function(a){var b=a.features||{};b.url=a.url;b.type=chrome.windows.CreateType.POPUP;chrome.windows.create(b,function(b){d(b.tabs[0],a)})};c.openTab=function(a){chrome.tabs.create({url:a.url},function(b){d(b,a)})};c.openWindow=function(a){chrome.windows.create({url:a.url},function(b){d(b.tabs[0],a)})};c.openSame=function(a){chrome.tabs.update(null,{url:a.url},function(b){d(b,a)})};c.navigateTab=function(a){chrome.tabs.update(a.tabId,
{url:a.url,active:!0},function(b){d(b,a)})};c.activateTab=function(a){chrome.windows.update(a.windowID,{focused:!0});chrome.tabs.update(a.tabID,{active:!0})};c.closeTab=function(a){chrome.tabs.remove(a.tabID)}})(LPPlatform);
