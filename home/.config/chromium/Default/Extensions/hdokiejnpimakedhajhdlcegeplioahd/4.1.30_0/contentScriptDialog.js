(function(){var e=Dialog,f=LPTools.getURLParams(),a=function(c,b){e.call(this,c,b);this.childDialogs=[];this.pendingAnimations=0};a.prototype=Object.create(Dialog.prototype);a.prototype.constructor=a;a.prototype.close=function(c){this.childDialogs.forEach(function(b){b.close(c)});var b=e.prototype.close.apply(this,arguments);b&&(0===e.prototype.getDialogCount()?csTop.LPFrame.close(f.dialogID):this.setFrameSize());this.data.modal&&csTop.LPFrame.hideModal();return b};a.prototype.setFrameSize=function(c){csTop.LPFrame.css({id:f.dialogID,
css:this.getSize(),callback:c&&c.callback})};a.prototype.addChildDialog=function(c){this.childDialogs.push(c);this.$element.append(c.$element)};a.prototype.getSize=function(){for(var c=$(".dialog:visible, .selectDropdownList:visible"),b=null,a=0;a<c.length;++a){var d;d=c[a];var e=d.getBoundingClientRect();d=$(d);d={top:e.top-parseInt(d.css("margin-top")),right:e.right+parseInt(d.css("margin-right")),bottom:e.bottom+parseInt(d.css("margin-bottom")),left:e.left-parseInt(d.css("margin-left"))};null===
b?b=d:(b.top=Math.min(b.top,d.top),b.right=Math.max(b.right,d.right),b.bottom=Math.max(b.bottom,d.bottom),b.left=Math.min(b.left,d.left))}return{"max-height":b.bottom-b.top,"max-width":b.right-b.left}};a.prototype.isOverlay=function(){return!1};a.prototype.requestAnimationFrame=function(c){var b=this,a=function(){++b.pendingAnimations;c(function(a){--b.pendingAnimations;0===b.pendingAnimations&&b.setFrameSize(a)})};0===this.pendingAnimations?csTop.LPFrame.css({id:f.dialogID,css:{"max-height":"none",
"max-width":"none"},callback:a}):a()};a.prototype.postSetup=function(){e.prototype.postSetup.apply(this,arguments);var a=$.extend(this.getSize(),{display:"block"});this.hide();csTop.LPFrame.css({id:f.dialogID,css:a,callback:this.createHandler(function(){this.showInitial()})})};a.prototype.showInitial=function(){this.show();this.data.modal&&csTop.LPFrame.showModal()};a.prototype.addPasswordEye=function(a){a.LP_addPasswordEye({checkPermissionHandler:this.checkViewPasswordHandler,includeGenerateButton:a.hasClass("generate"),
textual:!0})};var g=$.extend({},Dialog.prototype);$.extend(Dialog.prototype,a.prototype);Dialog=a;e.prototype=g})();
